<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"> 
    <title>Scott Chamberlain - basic ggplot2 network graphs - ver2</title>
    <meta name="author" content="Scott Chamberlain" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/screen.css">
    <link href="http://feeds.feedburner.com/github/wpna" rel="alternate" title="RSS" type="application/rss+xml" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/jquery.github_v2.js"></script>
  </head>

  <body>
    <div id="header" class="section">
      <div class="wrapper">
        <strong id="blog-title">
          <a href="/" rel="home">Recology</a>
        </strong>
        <p id="blog-description"></p>
        <div id="navigation">
          <ul class="nav clearfix">
            <li class="first-child"><a href="/blog.html">Recology</a></li>
            <li><a href="/recologyabout.html">About Recology</a></li>
            <li><a href="/R-esources.html">R-esources</a></li>
            <!--
            <li><a href="/projects.html">Code</a></li>
            <li><a href="/about.html">About</a></li>
            <li><a href="/cv.html">CV</a></li>
            <li><a href="/publications.html">Publications</a></li>
            <li><a href="/research.html">Research</a></li>
            <li><a href="/blogs.html">Blogs</a></li>
            <li><a href="/donors.html">Donors</a></li>
            -->
          </ul>
        </div>
      </div>
    </div>
    <div id="main" class="section">
      <div class="wrapper">
        <div id="content">
          <div class="full">
  <h1 class="entry-title">
    <a href="/2011/03/basic-ggplot2-network-graphs-ver2/" title="basic ggplot2 network graphs - ver2" rel="bookmark">basic ggplot2 network graphs - ver2</a>
  </h1>
  <!-- AddThis Button BEGIN -->
  <div class="addthis_toolbox addthis_default_style ">
    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    <a class="addthis_button_tweet"></a>
    <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <!-- AddThis Button END -->
  
  <!--
  <div class="metadata"><b>Written by</b> Scott Chamberlain</div>
  -->
  
  
	<div class="post">
		<div class="meta">
			<img src="http://www.gravatar.com/avatar/d9033fa816e09d79e44995e92f025cdd?s=40">
			<span class="author">Scott Chamberlain</span>
		</div>
	</div>
	
  <br /> <br /> <br /> <br />
  
  <div class="entry-content full-content">
    <p>I posted last week a <a href="http://r-ecology.blogspot.com/2011/03/basic-ggplot2-network-graphs.html">simple function to plot networks using ggplot2 package</a>. Here is version 2. I still need to work on figuring out efficient vertex placement.<br /><br /><u>Changes in version 2:</u><br />-You have one of three options: use an igraph object, a matrix, or a dataframe (matrices will be converted to data frames within the function)<br /><br />-If you have data on food webs similar to that provided in the Takapoto dataset provided in the NetIndices package, you can set trophic = "TRUE", and gggraph will use the function TrophInd to assign trophic levels (the y axis value) to each vertex/node. You have to provide additional information along with this option such as what the imports and exports are, see NetIndices documentation.<br /><br />-I added some simple error checking.<br /><br />-if using method="df" and trophic="FALSE", x axis placement of vertices is now done using the function&nbsp;degreex (see inside the fxn), which sorts vertices according to their degree (so the least connected species are on the left of the graph; note that species with the same degree are not stacked on the y-axis because e.g., two vertices of degree=5 would get x=3 then x=4).<br /><br /><br /><br /><div style="overflow: auto;"><div class="geshifilter"><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #666666; font-style: italic;">######### ggraph version 2</span><br /><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/bipartite">bipartite</a><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/igraph">igraph</a><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/ggplot2">ggplot2</a><span style="color: #009900;">)</span> <br /><a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/NetIndices">NetIndices</a><span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: #666666; font-style: italic;"># gggraph, version 2</span><br /><span style="color: #666666; font-style: italic;"># g = an igraph graph object, a matrix, or data frame</span><br /><span style="color: #666666; font-style: italic;"># vplace = type of vertex placement assignment, one of rnorm, runif, etc.</span><br /><span style="color: #666666; font-style: italic;"># method = one of 'df' for data frame, "mat' for matrix or "igraph" for an igraph graph object</span><br /><span style="color: #666666; font-style: italic;"># trophic = TRUE or FALSE for using Netindices function TrophInd to determine trophic level (y value in graph)</span><br /><span style="color: #666666; font-style: italic;"># trophinames = columns in matrix or dataframe to use for calculating trophic level</span><br /><span style="color: #666666; font-style: italic;"># import = named or refereced by col# columns of matrix or dataframe to use for import argument of TrophInd</span><br /><span style="color: #666666; font-style: italic;"># export = named or refereced by col# columns of matrix or dataframe to use for export argument of TrophInd</span><br /><span style="color: #666666; font-style: italic;"># dead = named or refereced by col# columns of matrix or dataframe to use for dead argument of TrophInd</span><br />&nbsp;<br />gggraph &lt;- <a href="http://inside-r.org/r-doc/base/function"><span style="color: #003399; font-weight: bold;">function</span></a><span style="color: #009900;">(</span>g<span style="color: #339933;">,</span> vplace = <a href="http://inside-r.org/r-doc/stats/rnorm"><span style="color: #003399; font-weight: bold;">rnorm</span></a><span style="color: #339933;">,</span> method<span style="color: #339933;">,</span> trophic = <span style="color: blue;">"FALSE"</span><span style="color: #339933;">,</span> <br />     trophinames<span style="color: #339933;">,</span> import<span style="color: #339933;">,</span> export<span style="color: #009900;">)</span> <br /><span style="color: #009900;">{</span><br />degreex  &lt;- <a href="http://inside-r.org/r-doc/base/function"><span style="color: #003399; font-weight: bold;">function</span></a><span style="color: #009900;">(</span>x<span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />  degreecol &lt;- <a href="http://inside-r.org/r-doc/base/apply"><span style="color: #003399; font-weight: bold;">apply</span></a><span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/function"><span style="color: #003399; font-weight: bold;">function</span></a><span style="color: #009900;">(</span>y<span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/base/length"><span style="color: #003399; font-weight: bold;">length</span></a><span style="color: #009900;">(</span>y<span style="color: #009900;">[</span>y&gt;<span style="color: #cc66cc;">0</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br />  degreerow &lt;- <a href="http://inside-r.org/r-doc/base/apply"><span style="color: #003399; font-weight: bold;">apply</span></a><span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/function"><span style="color: #003399; font-weight: bold;">function</span></a><span style="color: #009900;">(</span>y<span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/base/length"><span style="color: #003399; font-weight: bold;">length</span></a><span style="color: #009900;">(</span>y<span style="color: #009900;">[</span>y&gt;<span style="color: #cc66cc;">0</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br />  degrees &lt;- <a href="http://inside-r.org/r-doc/base/sort"><span style="color: #003399; font-weight: bold;">sort</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span>degreecol<span style="color: #339933;">,</span> degreerow<span style="color: #009900;">)</span><span style="color: #009900;">)</span><br />  <a href="http://inside-r.org/r-doc/stats/df"><span style="color: #003399; font-weight: bold;">df</span></a> &lt;- <a href="http://inside-r.org/r-doc/base/data.frame"><span style="color: #003399; font-weight: bold;">data.frame</span></a><span style="color: #009900;">(</span>degrees<span style="color: #339933;">,</span> x = <a href="http://inside-r.org/r-doc/base/seq"><span style="color: #003399; font-weight: bold;">seq</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/length"><span style="color: #003399; font-weight: bold;">length</span></a><span style="color: #009900;">(</span>degrees<span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br />  <a href="http://inside-r.org/r-doc/stats/df"><span style="color: #003399; font-weight: bold;">df</span></a>$value &lt;- <a href="http://inside-r.org/r-doc/base/rownames"><span style="color: #003399; font-weight: bold;">rownames</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/stats/df"><span style="color: #003399; font-weight: bold;">df</span></a><span style="color: #009900;">)</span><br />  <a href="http://inside-r.org/r-doc/stats/df"><span style="color: #003399; font-weight: bold;">df</span></a><br /> <span style="color: #009900;">}</span><br />  <span style="color: #666666; font-style: italic;"># require igraph</span><br /> <span style="color: black; font-weight: bold;">if</span><span style="color: #009900;">(</span>!<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/igraph">igraph</a><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/base/stop"><span style="color: #003399; font-weight: bold;">stop</span></a><span style="color: #009900;">(</span><span style="color: blue;">"must first install 'igraph' package."</span><span style="color: #009900;">)</span> <br />   <span style="color: #666666; font-style: italic;"># require ggplot2</span><br /> <span style="color: black; font-weight: bold;">if</span><span style="color: #009900;">(</span>!<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/ggplot2">ggplot2</a><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/base/stop"><span style="color: #003399; font-weight: bold;">stop</span></a><span style="color: #009900;">(</span><span style="color: blue;">"must first install 'ggplot2' package."</span><span style="color: #009900;">)</span><br />&nbsp;<br /><span style="color: black; font-weight: bold;">if</span><span style="color: #009900;">(</span>method==<span style="color: blue;">"df"</span><span style="color: #009900;">)</span><span style="color: #009900;">{</span><br />  <span style="color: black; font-weight: bold;">if</span><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/class"><span style="color: #003399; font-weight: bold;">class</span></a><span style="color: #009900;">(</span>g<span style="color: #009900;">)</span>==<span style="color: blue;">"matrix"</span><span style="color: #009900;">)</span><span style="color: #009900;">{</span> g &lt;- <a href="http://inside-r.org/r-doc/base/as.data.frame"><span style="color: #003399; font-weight: bold;">as.data.frame</span></a><span style="color: #009900;">(</span>g<span style="color: #009900;">)</span> <span style="color: #009900;">}</span><br />  <span style="color: black; font-weight: bold;">if</span><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/class"><span style="color: #003399; font-weight: bold;">class</span></a><span style="color: #009900;">(</span>g<span style="color: #009900;">)</span>!=<span style="color: blue;">"data.frame"</span><span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/base/stop"><span style="color: #003399; font-weight: bold;">stop</span></a><span style="color: #009900;">(</span><span style="color: blue;">"object must be of class 'data.frame.'"</span><span style="color: #009900;">)</span><br /><span style="color: black; font-weight: bold;">if</span><span style="color: #009900;">(</span>trophic==<span style="color: blue;">"FALSE"</span><span style="color: #009900;">)</span><span style="color: #009900;">{</span><br /> <span style="color: #666666; font-style: italic;"># data preparation from adjacency matrix</span><br /> temp &lt;- <a href="http://inside-r.org/r-doc/base/data.frame"><span style="color: #003399; font-weight: bold;">data.frame</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/expand.grid"><span style="color: #003399; font-weight: bold;">expand.grid</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/dimnames"><span style="color: #003399; font-weight: bold;">dimnames</span></a><span style="color: #009900;">(</span>g<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">[</span><span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">2</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/as.vector"><span style="color: #003399; font-weight: bold;">as.vector</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/as.matrix"><span style="color: #003399; font-weight: bold;">as.matrix</span></a><span style="color: #009900;">(</span>g<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /> temp &lt;- temp<span style="color: #009900;">[</span><span style="color: #009900;">(</span>temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">3</span><span style="color: #009900;">]</span> &gt; <span style="color: #cc66cc;">0</span><span style="color: #009900;">)</span> &amp; !<a href="http://inside-r.org/r-doc/base/is.na"><span style="color: #003399; font-weight: bold;">is.na</span></a><span style="color: #009900;">(</span>temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">3</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #009900;">]</span><br /> temp &lt;- temp<span style="color: #009900;">[</span><a href="http://inside-r.org/r-doc/base/sort.list"><span style="color: #003399; font-weight: bold;">sort.list</span></a><span style="color: #009900;">(</span>temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #009900;">]</span><br /> g_df &lt;- <a href="http://inside-r.org/r-doc/base/data.frame"><span style="color: #003399; font-weight: bold;">data.frame</span></a><span style="color: #009900;">(</span>rows = temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> cols = temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> freqint = temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">3</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br />&nbsp;<br /> g_df$id &lt;- <span style="color: #cc66cc;">1</span>:<a href="http://inside-r.org/r-doc/base/length"><span style="color: #003399; font-weight: bold;">length</span></a><span style="color: #009900;">(</span>g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br /> g_df &lt;- <a href="http://inside-r.org/r-doc/base/data.frame"><span style="color: #003399; font-weight: bold;">data.frame</span></a><span style="color: #009900;">(</span>id=g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">4</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> rows=g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> cols=g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">2</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> freqint=g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">3</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br /> g_df<em> &lt;- melt<span style="color: #009900;">(</span>g_df<span style="color: #339933;">,</span> id=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">4</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br />&nbsp;<br /> xy_s &lt;- <a href="http://inside-r.org/r-doc/base/data.frame"><span style="color: #003399; font-weight: bold;">data.frame</span></a><span style="color: #009900;">(</span>degreex<span style="color: #009900;">(</span>g<span style="color: #009900;">)</span><span style="color: #339933;">,</span> y = <a href="http://inside-r.org/r-doc/stats/rnorm"><span style="color: #003399; font-weight: bold;">rnorm</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/length"><span style="color: #003399; font-weight: bold;">length</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/unique"><span style="color: #003399; font-weight: bold;">unique</span></a><span style="color: #009900;">(</span>g_df</em>$value<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <br /> g_df_2 &lt;- <a href="http://inside-r.org/r-doc/base/merge"><span style="color: #003399; font-weight: bold;">merge</span></a><span style="color: #009900;">(</span>g_df<em><span style="color: #339933;">,</span> xy_s<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/by"><span style="color: #003399; font-weight: bold;">by</span></a> = <span style="color: blue;">"value"</span><span style="color: #009900;">)</span><br /> <span style="color: #009900;">}</span> <span style="color: black; font-weight: bold;">else</span> <span style="color: black; font-weight: bold;">if</span><span style="color: #009900;">(</span>trophic==<span style="color: blue;">"TRUE"</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />   <span style="color: #666666; font-style: italic;"># require NetIndices</span><br />  <span style="color: black; font-weight: bold;">if</span><span style="color: #009900;">(</span>!<a href="http://inside-r.org/r-doc/base/require"><span style="color: #003399; font-weight: bold;">require</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/packages/cran/NetIndices">NetIndices</a><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/base/stop"><span style="color: #003399; font-weight: bold;">stop</span></a><span style="color: #009900;">(</span><span style="color: blue;">"must first install 'NetIndices' package."</span><span style="color: #009900;">)</span><br /> <span style="color: #666666; font-style: italic;"># data preparation from adjacency matrix</span><br /> temp &lt;- <a href="http://inside-r.org/r-doc/base/data.frame"><span style="color: #003399; font-weight: bold;">data.frame</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/expand.grid"><span style="color: #003399; font-weight: bold;">expand.grid</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/dimnames"><span style="color: #003399; font-weight: bold;">dimnames</span></a><span style="color: #009900;">(</span>g<span style="color: #009900;">[</span>-trophinames<span style="color: #339933;">,</span> -trophinames<span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">[</span><span style="color: #cc66cc;">1</span>:<span style="color: #cc66cc;">2</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> <br />   <a href="http://inside-r.org/r-doc/base/as.vector"><span style="color: #003399; font-weight: bold;">as.vector</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/as.matrix"><span style="color: #003399; font-weight: bold;">as.matrix</span></a><span style="color: #009900;">(</span>g<span style="color: #009900;">[</span>-trophinames<span style="color: #339933;">,</span> -trophinames<span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /> temp &lt;- temp<span style="color: #009900;">[</span><span style="color: #009900;">(</span>temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">3</span><span style="color: #009900;">]</span> &gt; <span style="color: #cc66cc;">0</span><span style="color: #009900;">)</span> &amp; !<a href="http://inside-r.org/r-doc/base/is.na"><span style="color: #003399; font-weight: bold;">is.na</span></a><span style="color: #009900;">(</span>temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">3</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #009900;">]</span><br /> temp &lt;- temp<span style="color: #009900;">[</span><a href="http://inside-r.org/r-doc/base/sort.list"><span style="color: #003399; font-weight: bold;">sort.list</span></a><span style="color: #009900;">(</span>temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #009900;">]</span><br /> g_df &lt;- <a href="http://inside-r.org/r-doc/base/data.frame"><span style="color: #003399; font-weight: bold;">data.frame</span></a><span style="color: #009900;">(</span>rows = temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> cols = temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">2</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> freqint = temp<span style="color: #009900;">[</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">3</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br />&nbsp;<br /> g_df$id &lt;- <span style="color: #cc66cc;">1</span>:<a href="http://inside-r.org/r-doc/base/length"><span style="color: #003399; font-weight: bold;">length</span></a><span style="color: #009900;">(</span>g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br /> g_df &lt;- <a href="http://inside-r.org/r-doc/base/data.frame"><span style="color: #003399; font-weight: bold;">data.frame</span></a><span style="color: #009900;">(</span>id=g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">4</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> rows=g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> <br />      cols=g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">2</span><span style="color: #009900;">]</span><span style="color: #339933;">,</span> freqint=g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">3</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br /> g_df</em> &lt;- melt<span style="color: #009900;">(</span>g_df<span style="color: #339933;">,</span> id=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">4</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br />&nbsp;<br /> xy_s &lt;- <a href="http://inside-r.org/r-doc/base/data.frame"><span style="color: #003399; font-weight: bold;">data.frame</span></a><span style="color: #009900;">(</span>value = <a href="http://inside-r.org/r-doc/base/unique"><span style="color: #003399; font-weight: bold;">unique</span></a><span style="color: #009900;">(</span>g_df<em>$value<span style="color: #009900;">)</span><span style="color: #339933;">,</span> <br />  x = <a href="http://inside-r.org/r-doc/stats/rnorm"><span style="color: #003399; font-weight: bold;">rnorm</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/length"><span style="color: #003399; font-weight: bold;">length</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/unique"><span style="color: #003399; font-weight: bold;">unique</span></a><span style="color: #009900;">(</span>g_df</em>$value<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <br />  y = TrophInd<span style="color: #009900;">(</span>g<span style="color: #339933;">,</span> Import=import<span style="color: #339933;">,</span> Export=export<span style="color: #009900;">)</span><span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br /> g_df_2 &lt;- <a href="http://inside-r.org/r-doc/base/merge"><span style="color: #003399; font-weight: bold;">merge</span></a><span style="color: #009900;">(</span>g_df<em><span style="color: #339933;">,</span> xy_s<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/by"><span style="color: #003399; font-weight: bold;">by</span></a> = <span style="color: blue;">"value"</span><span style="color: #009900;">)</span> <br /> <span style="color: #009900;">}</span><br /> <span style="color: #666666; font-style: italic;"># plotting</span><br /> p &lt;- <a href="http://inside-r.org/packages/cran/ggplot">ggplot</a><span style="color: #009900;">(</span>g_df_2<span style="color: #339933;">,</span> aes<span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> y<span style="color: #009900;">)</span><span style="color: #009900;">)</span> +<br />  geom_point<span style="color: #009900;">(</span>size = <span style="color: #cc66cc;">5</span><span style="color: #009900;">)</span> +<br />  geom_line<span style="color: #009900;">(</span>aes<span style="color: #009900;">(</span>size = freqint<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/grDevices/group"><span style="color: #003399; font-weight: bold;">group</span></a> = id<span style="color: #009900;">)</span><span style="color: #009900;">)</span> +<br />  geom_text<span style="color: #009900;">(</span>size = <span style="color: #cc66cc;">3</span><span style="color: #339933;">,</span> hjust = <span style="color: #cc66cc;">1.5</span><span style="color: #339933;">,</span> aes<span style="color: #009900;">(</span>label = value<span style="color: #009900;">)</span><span style="color: #009900;">)</span> +<br />  theme_bw<span style="color: #009900;">(</span><span style="color: #009900;">)</span> + <br />  opts<span style="color: #009900;">(</span>panel.grid.major=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <br />   panel.grid.minor=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <br />   axis.text.x=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   axis.text.y=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   axis.title.x=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   axis.title.y=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   axis.ticks=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   panel.border=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   legend.position=<span style="color: blue;">"none"</span><span style="color: #009900;">)</span><br />&nbsp;<br /> p <span style="color: #666666; font-style: italic;"># return graph</span><br /><span style="color: #009900;">}</span> <span style="color: black; font-weight: bold;">else</span> <span style="color: black; font-weight: bold;">if</span><span style="color: #009900;">(</span>method==<span style="color: blue;">"igraph"</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span><br />  <span style="color: black; font-weight: bold;">if</span><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/class"><span style="color: #003399; font-weight: bold;">class</span></a><span style="color: #009900;">(</span>g<span style="color: #009900;">)</span>!=<span style="color: blue;">"igraph"</span><span style="color: #009900;">)</span> <a href="http://inside-r.org/r-doc/base/stop"><span style="color: #003399; font-weight: bold;">stop</span></a><span style="color: #009900;">(</span><span style="color: blue;">"object must be of class 'igraph.'"</span><span style="color: #009900;">)</span><br /> <span style="color: #666666; font-style: italic;"># data preparation from igraph object</span><br /> g</em> &lt;- get.edgelist<span style="color: #009900;">(</span>g<span style="color: #009900;">)</span><br /> g_df &lt;- <a href="http://inside-r.org/r-doc/base/as.data.frame"><span style="color: #003399; font-weight: bold;">as.data.frame</span></a><span style="color: #009900;">(</span>g_<span style="color: #009900;">)</span><br /> g_df$id &lt;- <span style="color: #cc66cc;">1</span>:<a href="http://inside-r.org/r-doc/base/length"><span style="color: #003399; font-weight: bold;">length</span></a><span style="color: #009900;">(</span>g_df<span style="color: #009900;">[</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br /> g_df &lt;- melt<span style="color: #009900;">(</span>g_df<span style="color: #339933;">,</span> id=<span style="color: #cc66cc;">3</span><span style="color: #009900;">)</span><br /> xy_s &lt;- <a href="http://inside-r.org/r-doc/base/data.frame"><span style="color: #003399; font-weight: bold;">data.frame</span></a><span style="color: #009900;">(</span>value = <a href="http://inside-r.org/r-doc/base/unique"><span style="color: #003399; font-weight: bold;">unique</span></a><span style="color: #009900;">(</span>g_df$value<span style="color: #009900;">)</span><span style="color: #339933;">,</span> <br />  x = vplace<span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/length"><span style="color: #003399; font-weight: bold;">length</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/unique"><span style="color: #003399; font-weight: bold;">unique</span></a><span style="color: #009900;">(</span>g_df$value<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <br />  y = vplace<span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/length"><span style="color: #003399; font-weight: bold;">length</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/unique"><span style="color: #003399; font-weight: bold;">unique</span></a><span style="color: #009900;">(</span>g_df$value<span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /> g_df2 &lt;- <a href="http://inside-r.org/r-doc/base/merge"><span style="color: #003399; font-weight: bold;">merge</span></a><span style="color: #009900;">(</span>g_df<span style="color: #339933;">,</span> xy_s<span style="color: #339933;">,</span> <a href="http://inside-r.org/r-doc/base/by"><span style="color: #003399; font-weight: bold;">by</span></a> = <span style="color: blue;">"value"</span><span style="color: #009900;">)</span> <br />&nbsp;<br /> <span style="color: #666666; font-style: italic;"># plotting</span><br /> p &lt;- <a href="http://inside-r.org/packages/cran/ggplot">ggplot</a><span style="color: #009900;">(</span>g_df2<span style="color: #339933;">,</span> aes<span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> y<span style="color: #009900;">)</span><span style="color: #009900;">)</span> +<br />  geom_point<span style="color: #009900;">(</span>size = <span style="color: #cc66cc;">2</span><span style="color: #009900;">)</span> +<br />  geom_line<span style="color: #009900;">(</span>size = <span style="color: #cc66cc;">0.3</span><span style="color: #339933;">,</span> aes<span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/grDevices/group"><span style="color: #003399; font-weight: bold;">group</span></a> = id<span style="color: #339933;">,</span> linetype = id<span style="color: #009900;">)</span><span style="color: #009900;">)</span> +<br />  geom_text<span style="color: #009900;">(</span>size = <span style="color: #cc66cc;">3</span><span style="color: #339933;">,</span> hjust = <span style="color: #cc66cc;">1.5</span><span style="color: #339933;">,</span> aes<span style="color: #009900;">(</span>label = value<span style="color: #009900;">)</span><span style="color: #009900;">)</span> +<br />  theme_bw<span style="color: #009900;">(</span><span style="color: #009900;">)</span> + <br />  opts<span style="color: #009900;">(</span>panel.grid.major=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <br />   panel.grid.minor=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <br />   axis.text.x=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   axis.text.y=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   axis.title.x=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   axis.title.y=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   axis.ticks=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   panel.border=theme_blank<span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span><br />   legend.position=<span style="color: blue;">"none"</span><span style="color: #009900;">)</span><br />&nbsp;<br /> p <span style="color: #666666; font-style: italic;"># return graph</span><br /><span style="color: #009900;">}</span> <span style="color: black; font-weight: bold;">else</span> <br /> <a href="http://inside-r.org/r-doc/base/stop"><span style="color: #003399; font-weight: bold;">stop</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/paste"><span style="color: #003399; font-weight: bold;">paste</span></a><span style="color: #009900;">(</span><span style="color: blue;">"do not recognize method = <span style="color: #000099; font-weight: bold;">\"</span>"</span><span style="color: #339933;">,</span>method<span style="color: #339933;">,</span><span style="color: blue;">"<span style="color: #000099; font-weight: bold;">\"</span>; <br />  methods are <span style="color: #000099; font-weight: bold;">\"</span>df<span style="color: #000099; font-weight: bold;">\"</span> and <span style="color: #000099; font-weight: bold;">\"</span>igraph<span style="color: #000099; font-weight: bold;">\"</span>"</span><span style="color: #339933;">,</span>sep=<span style="color: blue;">""</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /><span style="color: #009900;">}</span></pre></div></div><br /><span style="color: #666666; font-style: italic;">############### Eg</span><br /><a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399; font-weight: bold;">data</span></a><span style="color: #009900;">(</span>Takapoto<span style="color: #009900;">)</span><br />gggraph<span style="color: #009900;">(</span>Takapoto<span style="color: #339933;">,</span> vplace = <a href="http://inside-r.org/r-doc/stats/rnorm"><span style="color: #003399; font-weight: bold;">rnorm</span></a><span style="color: #339933;">,</span> method = <span style="color: blue;">"df"</span><span style="color: #339933;">,</span> trophic = <span style="color: blue;">"TRUE"</span><span style="color: #339933;">,</span> trophinames = <a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">8</span>:<span style="color: #cc66cc;">10</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <br />import = <span style="color: blue;">"CO2"</span><span style="color: #339933;">,</span> export = <a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: blue;">"CO2"</span><span style="color: #339933;">,</span> <span style="color: blue;">"Sedimentation"</span><span style="color: #339933;">,</span> <span style="color: blue;">"Grazing"</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /><div class="separator" style="clear: both; text-align: center;"><br /></div><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://lh3.googleusercontent.com/-LAeWjCzUxzU/TYpCkoo2BwI/AAAAAAAAEbQ/5v5696gOia8/s1600/gggraph_trophic.jpeg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="400" src="https://lh3.googleusercontent.com/-LAeWjCzUxzU/TYpCkoo2BwI/AAAAAAAAEbQ/5v5696gOia8/s400/gggraph_trophic.jpeg" width="400" /></a></div><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;">&nbsp;<br /></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;">plants &lt;- <a href="http://inside-r.org/r-doc/base/round"><span style="color: #003399; font-weight: bold;">round</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/stats/rlnorm"><span style="color: #003399; font-weight: bold;">rlnorm</span></a><span style="color: #009900;">(</span>n=<span style="color: #cc66cc;">5</span><span style="color: #339933;">,</span> meanlog=<span style="color: #cc66cc;">2</span><span style="color: #339933;">,</span> sdlog=<span style="color: #cc66cc;">1</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/cluster/animals"><span style="color: #003399; font-weight: bold;">animals</span></a> &lt;- <a href="http://inside-r.org/r-doc/base/round"><span style="color: #003399; font-weight: bold;">round</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/stats/rlnorm"><span style="color: #003399; font-weight: bold;">rlnorm</span></a><span style="color: #009900;">(</span>n=<span style="color: #cc66cc;">5</span><span style="color: #339933;">,</span> meanlog=<span style="color: #cc66cc;">2</span><span style="color: #339933;">,</span> sdlog=<span style="color: #cc66cc;">1</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br />plants &lt;- plants<em><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span>/sum<span style="color: #009900;">(</span>plants<span style="color: #009900;">)</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/cluster/animals"><span style="color: #003399; font-weight: bold;">animals</span></a> &lt;- <a href="http://inside-r.org/r-doc/cluster/animals"><span style="color: #003399; font-weight: bold;">animals</span></a></em><span style="color: #009900;">(</span><span style="color: #cc66cc;">100</span>/sum<span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/cluster/animals"><span style="color: #003399; font-weight: bold;">animals</span></a><span style="color: #009900;">)</span><span style="color: #009900;">)</span><br />z &lt;- <a href="http://inside-r.org/r-doc/stats/r2dtable"><span style="color: #003399; font-weight: bold;">r2dtable</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span><a href="http://inside-r.org/r-doc/cluster/animals"><span style="color: #003399; font-weight: bold;">animals</span></a><span style="color: #339933;">,</span>plants<span style="color: #009900;">)</span>  <span style="color: #666666; font-style: italic;"># if you get errors on this step just rerun again until no error</span><br />z &lt;- <a href="http://inside-r.org/r-doc/base/as.data.frame"><span style="color: #003399; font-weight: bold;">as.data.frame</span></a><span style="color: #009900;">(</span>z<span style="color: #009900;">[</span><span style="color: #009900;">[</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">]</span><span style="color: #009900;">]</span><span style="color: #009900;">)</span><br /><a href="http://inside-r.org/r-doc/base/rownames"><span style="color: #003399; font-weight: bold;">rownames</span></a><span style="color: #009900;">(</span>z<span style="color: #009900;">)</span> &lt;- <a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: blue;">"a"</span><span style="color: #339933;">,</span><span style="color: blue;">"b"</span><span style="color: #339933;">,</span><span style="color: blue;">"c"</span><span style="color: #339933;">,</span><span style="color: blue;">"d"</span><span style="color: #339933;">,</span><span style="color: blue;">"e"</span><span style="color: #009900;">)</span><br />gggraph<span style="color: #009900;">(</span>z<span style="color: #339933;">,</span> vplace = <a href="http://inside-r.org/r-doc/stats/rnorm"><span style="color: #003399; font-weight: bold;">rnorm</span></a><span style="color: #339933;">,</span> method = <span style="color: blue;">"df"</span><span style="color: #339933;">,</span> trophic = <span style="color: blue;">"FALSE"</span><span style="color: #009900;">)</span><br /></pre><div class="separator" style="clear: both; text-align: center;"><a href="https://lh6.googleusercontent.com/-FSpM2FmvOeE/TYpCkQySuAI/AAAAAAAAEbM/TSSrg2HkoBU/s1600/gggraph_matrixdf.jpeg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="400" src="https://lh6.googleusercontent.com/-FSpM2FmvOeE/TYpCkQySuAI/AAAAAAAAEbM/TSSrg2HkoBU/s400/gggraph_matrixdf.jpeg" width="400" /></a></div><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;">&nbsp;<br /></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;"></pre><pre class="r geshifilter-R" style="font-family: monospace;">g &lt;- grg.game<span style="color: #009900;">(</span><span style="color: #cc66cc;">20</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">0.45</span><span style="color: #339933;">,</span> torus=<span style="color: black; font-weight: bold;">FALSE</span><span style="color: #009900;">)</span><br />gggraph<span style="color: #009900;">(</span>g<span style="color: #339933;">,</span> vplace = <a href="http://inside-r.org/r-doc/stats/rnorm"><span style="color: #003399; font-weight: bold;">rnorm</span></a><span style="color: #339933;">,</span> method = <span style="color: blue;">"igraph"</span><span style="color: #339933;">,</span> trophic = <span style="color: blue;">"FALSE"</span><span style="color: #009900;">)</span></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #009900;"><br /></span></pre><div class="separator" style="clear: both; text-align: center;"><a href="https://lh5.googleusercontent.com/-VSD2Xdt7Ukk/TYpCj8hbNsI/AAAAAAAAEbI/-YbX6s0I2QY/s1600/gggraph_igraph.jpeg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="400" src="https://lh5.googleusercontent.com/-VSD2Xdt7Ukk/TYpCj8hbNsI/AAAAAAAAEbI/-YbX6s0I2QY/s400/gggraph_igraph.jpeg" width="400" /></a></div><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #009900;"><span class="Apple-style-span" style="color: black; font-family: Times; white-space: normal;"></span></span></pre><pre class="r geshifilter-R" style="font-family: monospace;"><span style="color: #009900;"><br /></span></pre><a href="http://www.inside-r.org/pretty-r" title="Created by Pretty R at inside-R.org">Created by Pretty R at inside-R.org</a></p>

    <div class="clear"></div>
  </div>
  
  <!-- AddThis Button BEGIN -->
  <div class="addthis_toolbox addthis_default_style ">
    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    <a class="addthis_button_tweet"></a>
    <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <!-- AddThis Button END -->
  <p class="alt-font tight">
    Posted in&nbsp;
    
    <a href="/categories/ggplot2" title="ggplot2" rel="category tag">ggplot2</a>
    
    <a href="/categories/bipartite" title="bipartite" rel="category tag">bipartite</a>
    
    <a href="/categories/networks" title="networks" rel="category tag">networks</a>
    
    <a href="/categories/igraph" title="igraph" rel="category tag">igraph</a>
    
    <a href="/categories/r" title="r" rel="category tag">r</a>
    
  </p>
  <p class="by-line">
    <span class="date full-date">
      <abbr class="published" title="2011-03-23 19:09:00 +0000">23 Mar 2011</abbr>
    </span>
  </p>
  <div class="clear"></div>
</div>
<div class="rule">
  <hr/>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=SChamberlain"></script>
<script type="text/javascript">
  var disqus_shortname = 'recology';

  var disqus_url = "http://schamberlain.github.com/2011/03/basic-ggplot2-network-graphs-ver2/";

  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


        </div>
        <div id="sidebar">
          <div id="carrington-subscribe" class="widget">
            <h2 class="widget-title">Subscribe to Recology</h2>
            <a class="feed alignright" title="RSS 2.0 feed for posts" rel="alternate" href="http://schamberlain.github.com/feed">
              <img src="/images/rss-button.gif" alt="latest posts" title="latest posts">
            </a>
          </div>
          <div id="carrington-subscribe" class="widget">
            <h2 class="widget-title">Just R posts</h2>
            <a class="feed alignright" title="RSS 2.0 feed for posts" rel="alternate" href="http://schamberlain.github.com/feed.R">
              <img src="/images/rss-button.gif" alt="latest R posts" title="latest R posts">
            </a>
          </div>
          <div id="carrington-about" class="widget">
            <div class="about">
              <h2 class="widget-title">About</h2>
              <p>Recology is a blog about open science, and using R for ecology and evolution.  Contributors are Pascal Mickelson and Scott Chamberlain.  Pascal is a post-doc in the College of Optical Sciences at University of Arizona, Tucson, AZ.  Scott is a graduate student in the Ecology and Evolutionary Biology Department at Rice University in Houston, TX.</p>
              <a class="more" href="/recologyabout.html">more →</a>
            </div>
          </div>
          
          	<p>
              <a href="http://ropensci.org/">
                <img src="/images/ropensci.png">
              </a>
        	</p>
			
			<!--
          <div id="carrington-link" class="widget">
          	<a href="http://ropensci.org/">
            <img src="/images/ropensci.png">
          </div>
          	-->
          
          <!--
          <div id="primary-sidebar">
            <div class="widget">
              <h2 class="widget-title">Categories</h2>
              <ul>
                
                <li><a href="/categories/evolution">evolution (21)</a></li>
                
                <li><a href="/categories/ecology">ecology (22)</a></li>
                
                <li><a href="/categories/r">r (56)</a></li>
                
                <li><a href="/categories/ggplot2">ggplot2 (20)</a></li>
                
                <li><a href="/categories/phylogenetics">phylogenetics (18)</a></li>
                
                <li><a href="/categories/papers">papers (7)</a></li>
                
                <li><a href="/categories/picante">picante (3)</a></li>
                
                <li><a href="/categories/networks">networks (5)</a></li>
                
                <li><a href="/categories/googlevis">googlevis (3)</a></li>
                
                <li><a href="/categories/datasets">datasets (12)</a></li>
                
                <li><a href="/categories/plyr">plyr (6)</a></li>
                
                <li><a href="/categories/reshape2">reshape2 (2)</a></li>
                
                <li><a href="/categories/policy">policy (1)</a></li>
                
                <li><a href="/categories/phangorn">phangorn (2)</a></li>
                
                <li><a href="/categories/methods">methods (9)</a></li>
                
                <li><a href="/categories/lattice">lattice (1)</a></li>
                
                <li><a href="/categories/car">car (1)</a></li>
                
                <li><a href="/categories/bipartite">bipartite (2)</a></li>
                
                <li><a href="/categories/igraph">igraph (3)</a></li>
                
                <li><a href="/categories/meta-analysis">meta-analysis (2)</a></li>
                
                <li><a href="/categories/phylocom">phylocom (2)</a></li>
                
                <li><a href="/categories/ape">ape (4)</a></li>
                
                <li><a href="/categories/motmot">motmot (1)</a></li>
                
                <li><a href="/categories/taxize">taxize (1)</a></li>
                
                <li><a href="/categories/itis">itis (2)</a></li>
                
                <li><a href="/categories/statistics">statistics (4)</a></li>
                
                <li><a href="/categories/openaccess">openaccess (14)</a></li>
                
                <li><a href="/categories/api">api (6)</a></li>
                
                <li><a href="/categories/meetings">meetings (6)</a></li>
                
                <li><a href="/categories/cloudcomputing">cloudcomputing (1)</a></li>
                
                <li><a href="/categories/sciencetalks">sciencetalks (15)</a></li>
                
                <li><a href="/categories/jobs">jobs (1)</a></li>
                
                <li><a href="/categories/ropensci">ropensci (3)</a></li>
                
                <li><a href="/categories/vimeo">vimeo (1)</a></li>
                
                <li><a href="/categories/vime">vime (1)</a></li>
                
                <li><a href="/categories/datawithoutborders">datawithoutborders (1)</a></li>
                
                <li><a href="/categories/crowdfunding">crowdfunding (1)</a></li>
                
                <li><a href="/categories/tutorials">tutorials (3)</a></li>
                
                <li><a href="/categories/regex">regex (1)</a></li>
                
                <li><a href="/categories/packages">packages (3)</a></li>
                
                <li><a href="/categories/codedev">codedev (2)</a></li>
                
                <li><a href="/categories/begging">begging (1)</a></li>
                
                <li><a href="/categories/geiger">geiger (1)</a></li>
                
                <li><a href="/categories/phytools">phytools (1)</a></li>
                
                <li><a href="/categories/rmendeley">rmendeley (1)</a></li>
                
                <li><a href="/categories/rplos">rplos (1)</a></li>
                
                <li><a href="/categories/segue">segue (1)</a></li>
                
                <li><a href="/categories/londonr">londonr (1)</a></li>
                
                <li><a href="/categories/ec2">ec2 (1)</a></li>
                
                <li><a href="/categories/lubridate">lubridate (1)</a></li>
                
                <li><a href="/categories/twitter">twitter (1)</a></li>
                
                <li><a href="/categories/stringr">stringr (1)</a></li>
                
                <li><a href="/categories/treebase">treebase (1)</a></li>
                
                <li><a href="/categories/weecology">weecology (1)</a></li>
                
                <li><a href="/categories/gridextra">gridextra (1)</a></li>
                
                <li><a href="/categories/thoughts">thoughts (2)</a></li>
                
                <li><a href="/categories/blogger">blogger (1)</a></li>
                
                <li><a href="/categories/wordpress">wordpress (1)</a></li>
                
                <li><a href="/categories/jekyll">jekyll (1)</a></li>
                
                <li><a href="/categories/publishing">publishing (2)</a></li>
                
                <li><a href="/categories/peerreview">peerreview (1)</a></li>
                
                <li><a href="/categories/netlogo">netlogo (1)</a></li>
                
                <li><a href="/categories/scraping">scraping (1)</a></li>
                
                <li><a href="/categories/math">math (1)</a></li>
                
                <li><a href="/categories/datavisualization">datavisualization (3)</a></li>
                
                <li><a href="/categories/interactivegraphics">interactivegraphics (1)</a></li>
                
                <li><a href="/categories/abundance">abundance (1)</a></li>
                
                <li><a href="/categories/opencpu.org">opencpu.org (1)</a></li>
                
                <li><a href="/categories/github">github (1)</a></li>
                
                <li><a href="/categories/music">music (2)</a></li>
                
                <li><a href="/categories/misc">misc (2)</a></li>
                
              </ul>
            </div>
          </div>
          -->
          
          <div id="primary-sidebar">
            <div class="widget">
              <h2 class="widget-title">Recent Posts</h2>
              <ul>
                
                <li>
                  <a href="/2013/06/testing-chinese/" title="能否写中文？" rel="bookmark">能否写中文？</a>
                </li>
                
                <li>
                  <a href="/2012/05/chinese-economy/" title="chinese economy" rel="bookmark">chinese economy</a>
                </li>
                
                <li>
                  <a href="/2012/05/songs/" title="songs" rel="bookmark">songs</a>
                </li>
                
                <li>
                  <a href="/2012/05/becoz-i-love-u/" title="becoz i love u" rel="bookmark">becoz i love u</a>
                </li>
                
                <li>
                  <a href="/2012/05/opencpu-github-stats/" title="Visualize your Github stats (forks and watchers) in a browser with R!" rel="bookmark">Visualize your Github stats (forks and watchers) in a browser with R!</a>
                </li>
                
                <li>
                  <a href="/2012/03/mvabund/" title="mvabund - new R pkg for multivariate abundance data" rel="bookmark">mvabund - new R pkg for multivariate abundance data</a>
                </li>
                
                <li>
                  <a href="/2012/02/science-publications-need-interactive-graphics/" title="Journal Articles Need Interactive Graphics" rel="bookmark">Journal Articles Need Interactive Graphics</a>
                </li>
                
                <li>
                  <a href="/2012/02/math-ecology-survey/" title="Take the INNGE survey on math and ecology" rel="bookmark">Take the INNGE survey on math and ecology</a>
                </li>
                
                <li>
                  <a href="/2012/01/flora-north-america-scraping/" title="Scraping Flora of North America" rel="bookmark">Scraping Flora of North America</a>
                </li>
                
                <li>
                  <a href="/2012/01/RNetLogo/" title="RNetLogo - A package for running NetLogo from R" rel="bookmark">RNetLogo - A package for running NetLogo from R</a>
                </li>
                
              </ul>
              <div class="clear"></div>
            </div>
          </div>
           
          <div id="secondary-sidebar">
            <div class="widget">
            	<h2 class="widget-title">Blogroll</h2>
            	<ul>
            		<li><a href="http://ropensci.org/">rOpenSci</a></li>
            		<li><a href="http://www.r-bloggers.com/">R-Bloggers</a></li>            		<li><a href="http://reposodelecologo.blogspot.com/">El Reposo del Ecólogo Evolutivo</a></li>
            		<li><a href="http://phytools.blogspot.com/">Phylogenetic Tools for Comparative Biology </a></li>
            		<li><a href="http://thebiobucket.blogspot.com/">the BioBucket</a></li>
            		<li><a href="http://currentecology.blogspot.com/">Distributed Ecology</a></li>
            		<li><a href="http://blog.datadryad.org/">Dryad News and Views</a></li>
            		<li><a href="http://pvanb.wordpress.com/">Ecostudies</a></li>
            		<li><a href="http://contemplativemammoth.wordpress.com/">The contemplative Mammoth</a></li>
            		<li><a href="http://jabberwocky.weecology.org/">Jabberwocky Ecology</a></li>
            		<li><a href="http://evol-eco.blogspot.com/">The EEB & Flow</a></li>
            		<li><a href="http://researchremix.wordpress.com/">Research Remix</a></li>
            		<li><a href="http://www.imachordata.com/">i'm a chordata! urochordata!</a></li>
            		<li><a href="http://www.researchblogging.org/">Research Blogging</a></li>
            		<li><a href="http://www.esa.org/esablog/">Ecotone</a></li>
            	</ul>
            </div>
          </div>
            
          <div id="tertiary-sidebar">
            <div class="widget">
              <h2 class="widget-title">Categories</h2>
              <ul>
                
                <li><a href="/categories/evolution">evolution (21)</a></li>
                
                <li><a href="/categories/ecology">ecology (22)</a></li>
                
                <li><a href="/categories/r">r (56)</a></li>
                
                <li><a href="/categories/ggplot2">ggplot2 (20)</a></li>
                
                <li><a href="/categories/phylogenetics">phylogenetics (18)</a></li>
                
                <li><a href="/categories/papers">papers (7)</a></li>
                
                <li><a href="/categories/picante">picante (3)</a></li>
                
                <li><a href="/categories/networks">networks (5)</a></li>
                
                <li><a href="/categories/googlevis">googlevis (3)</a></li>
                
                <li><a href="/categories/datasets">datasets (12)</a></li>
                
                <li><a href="/categories/plyr">plyr (6)</a></li>
                
                <li><a href="/categories/reshape2">reshape2 (2)</a></li>
                
                <li><a href="/categories/policy">policy (1)</a></li>
                
                <li><a href="/categories/phangorn">phangorn (2)</a></li>
                
                <li><a href="/categories/methods">methods (9)</a></li>
                
                <li><a href="/categories/lattice">lattice (1)</a></li>
                
                <li><a href="/categories/car">car (1)</a></li>
                
                <li><a href="/categories/bipartite">bipartite (2)</a></li>
                
                <li><a href="/categories/igraph">igraph (3)</a></li>
                
                <li><a href="/categories/meta-analysis">meta-analysis (2)</a></li>
                
                <li><a href="/categories/phylocom">phylocom (2)</a></li>
                
                <li><a href="/categories/ape">ape (4)</a></li>
                
                <li><a href="/categories/motmot">motmot (1)</a></li>
                
                <li><a href="/categories/taxize">taxize (1)</a></li>
                
                <li><a href="/categories/itis">itis (2)</a></li>
                
                <li><a href="/categories/statistics">statistics (4)</a></li>
                
                <li><a href="/categories/openaccess">openaccess (14)</a></li>
                
                <li><a href="/categories/api">api (6)</a></li>
                
                <li><a href="/categories/meetings">meetings (6)</a></li>
                
                <li><a href="/categories/cloudcomputing">cloudcomputing (1)</a></li>
                
                <li><a href="/categories/sciencetalks">sciencetalks (15)</a></li>
                
                <li><a href="/categories/jobs">jobs (1)</a></li>
                
                <li><a href="/categories/ropensci">ropensci (3)</a></li>
                
                <li><a href="/categories/vimeo">vimeo (1)</a></li>
                
                <li><a href="/categories/vime">vime (1)</a></li>
                
                <li><a href="/categories/datawithoutborders">datawithoutborders (1)</a></li>
                
                <li><a href="/categories/crowdfunding">crowdfunding (1)</a></li>
                
                <li><a href="/categories/tutorials">tutorials (3)</a></li>
                
                <li><a href="/categories/regex">regex (1)</a></li>
                
                <li><a href="/categories/packages">packages (3)</a></li>
                
                <li><a href="/categories/codedev">codedev (2)</a></li>
                
                <li><a href="/categories/begging">begging (1)</a></li>
                
                <li><a href="/categories/geiger">geiger (1)</a></li>
                
                <li><a href="/categories/phytools">phytools (1)</a></li>
                
                <li><a href="/categories/rmendeley">rmendeley (1)</a></li>
                
                <li><a href="/categories/rplos">rplos (1)</a></li>
                
                <li><a href="/categories/segue">segue (1)</a></li>
                
                <li><a href="/categories/londonr">londonr (1)</a></li>
                
                <li><a href="/categories/ec2">ec2 (1)</a></li>
                
                <li><a href="/categories/lubridate">lubridate (1)</a></li>
                
                <li><a href="/categories/twitter">twitter (1)</a></li>
                
                <li><a href="/categories/stringr">stringr (1)</a></li>
                
                <li><a href="/categories/treebase">treebase (1)</a></li>
                
                <li><a href="/categories/weecology">weecology (1)</a></li>
                
                <li><a href="/categories/gridextra">gridextra (1)</a></li>
                
                <li><a href="/categories/thoughts">thoughts (2)</a></li>
                
                <li><a href="/categories/blogger">blogger (1)</a></li>
                
                <li><a href="/categories/wordpress">wordpress (1)</a></li>
                
                <li><a href="/categories/jekyll">jekyll (1)</a></li>
                
                <li><a href="/categories/publishing">publishing (2)</a></li>
                
                <li><a href="/categories/peerreview">peerreview (1)</a></li>
                
                <li><a href="/categories/netlogo">netlogo (1)</a></li>
                
                <li><a href="/categories/scraping">scraping (1)</a></li>
                
                <li><a href="/categories/math">math (1)</a></li>
                
                <li><a href="/categories/datavisualization">datavisualization (3)</a></li>
                
                <li><a href="/categories/interactivegraphics">interactivegraphics (1)</a></li>
                
                <li><a href="/categories/abundance">abundance (1)</a></li>
                
                <li><a href="/categories/opencpu.org">opencpu.org (1)</a></li>
                
                <li><a href="/categories/github">github (1)</a></li>
                
                <li><a href="/categories/music">music (2)</a></li>
                
                <li><a href="/categories/misc">misc (2)</a></li>
                
              </ul>
            </div>
          </div>
          
            <!--
            <div class="widget">
              <h2 class="widget-title">Archives</h2>
              <ul>
                
              </ul>
              <div class="clear"></div>
            </div>
            -->
        </div>
      </div>
    </div>
    <div id="footer" class="section">
      <div class="wrapper">
        <a id="generator-link">
          Proudly powered by
          <a href="https://github.com/mojombo/jekyll" rel="generator">Jekyll</a>
          and
          <a href="http://carringtontheme.com" title="Carrington theme for WordPress">Carrington</a>
      </div>
      <div id="developer-link">
      </div>
    </div>
    <a href="http://github.com/SChamberlain"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://assets2.github.com/img/e6bef7a091f5f3138b8cd40bc3e114258dd68ddf?repo=&url=http%3A%2F%2Fs3.amazonaws.com%2Fgithub%2Fribbons%2Fforkme_right_red_aa0000.png&path=" alt="Fork me on GitHub"></a>
    <script type="text/javascript">
      var disqus_shortname = 'recology';

      (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-28059658-1");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>    
  </body>
</html>
